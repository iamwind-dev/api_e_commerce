generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model chi_tiet_don_hang {
  ma_don_hang     String @db.VarChar(10)
  ma_nguyen_lieu  String @db.VarChar(10)
  ma_gian_hang    String @db.VarChar(8)
  ten_nguyen_lieu String @db.VarChar(255)
  so_luong        Int
  gia_cuoi        Int
  ma_mon_an       String @db.VarChar(5)
  thanh_tien      Int?

  @@id([ma_don_hang, ma_nguyen_lieu, ma_gian_hang, ma_mon_an])
}

model cho_table {
  ma_cho      String        @id @db.VarChar(5)
  ten_cho     String        @db.VarChar(255)
  ma_khu_vuc  String        @db.VarChar(4)
  khu_vuc     String        @db.VarChar(255)
  dia_chi     String        @db.VarChar(255)
  hinh_anh    String?       @db.Text
  gian_hang   gian_hang[]
  quan_ly_cho quan_ly_cho[]
}

model cong_thuc_mon_an {
  ID              Int         @id @default(autoincrement())
  ma_mon_an       String      @db.VarChar(5)
  ma_nguyen_lieu  String      @db.VarChar(10)
  ten_nguyen_lieu String?     @db.VarChar(255)
  dinh_luong      String?     @db.VarChar(255)
  mon_an          mon_an      @relation(fields: [ma_mon_an], references: [ma_mon_an], map: "fk_congthuc_monan")
  nguyen_lieu     nguyen_lieu @relation(fields: [ma_nguyen_lieu], references: [ma_nguyen_lieu], map: "fk_congthuc_nguyenlieu")

  @@index([ma_mon_an], map: "fk_congthuc_monan")
  @@index([ma_nguyen_lieu], map: "fk_congthuc_nguyenlieu")
}

model danh_gia {
  ma_danh_gia   String    @id @db.VarChar(10)
  ma_nguoi_mua  String    @db.VarChar(8)
  ma_gian_hang  String    @db.VarChar(8)
  ngay_danh_gia DateTime  @db.DateTime(0)
  rating        Int?
  binh_luan     String?   @db.Text
  gian_hang     gian_hang @relation(fields: [ma_gian_hang], references: [ma_gian_hang], map: "fk_danhgia_gianhang")
  nguoi_mua     nguoi_mua @relation(fields: [ma_nguoi_mua], references: [ma_nguoi_mua], map: "fk_danhgia_nguoimua")

  @@index([ma_gian_hang], map: "fk_danhgia_gianhang")
  @@index([ma_nguoi_mua], map: "fk_danhgia_nguoimua")
}

model danh_muc_mon_an {
  ma_danh_muc_mon_an  String             @id @db.VarChar(4)
  ten_danh_muc_mon_an String             @db.VarChar(255)
  loai_danh_muc       String             @db.VarChar(255)
  phan_loai_mon_an    phan_loai_mon_an[]
}

model don_hang {
  ma_don_hang         String     @id @db.VarChar(10)
  ma_thanh_toan       String     @db.VarChar(10)
  ma_nguoi_mua        String     @db.VarChar(8)
  tong_tien           Int
  dia_chi_giao_hang   String     @db.VarChar(255)
  tinh_trang_don_hang String     @db.VarChar(255)
  thoi_gian_giao_hang DateTime   @db.DateTime(0)
  nguoi_mua           nguoi_mua  @relation(fields: [ma_nguoi_mua], references: [ma_nguoi_mua], map: "fk_donhang_nguoimua")
  thanh_toan          thanh_toan @relation(fields: [ma_thanh_toan], references: [ma_thanh_toan], map: "fk_donhang_thanhtoan")
  gom_don             gom_don[]

  @@index([ma_nguoi_mua], map: "fk_donhang_nguoimua")
  @@index([ma_thanh_toan], map: "fk_donhang_thanhtoan")
}

model gian_hang {
  ma_gian_hang  String         @id @db.VarChar(8)
  ten_gian_hang String         @db.VarChar(255)
  ma_cho        String         @db.VarChar(5)
  ma_nguoi_dung String         @db.VarChar(6)
  ma_quan_ly    String         @db.VarChar(8)
  vi_tri        String         @db.VarChar(255)
  hinh_anh      String?        @db.Text
  danh_gia_tb   Float?         @db.Float
  ngay_dang_ky  DateTime       @db.Date
  danh_gia_list danh_gia[]
  cho_table     cho_table      @relation(fields: [ma_cho], references: [ma_cho], map: "fk_gianhang_cho")
  nguoi_dung    nguoi_dung     @relation(fields: [ma_nguoi_dung], references: [ma_nguoi_dung], map: "fk_gianhang_nguoidung")
  quan_ly_cho   quan_ly_cho    @relation(fields: [ma_quan_ly], references: [ma_quan_ly], map: "fk_gianhang_quanlycho")
  san_pham_ban  san_pham_ban[]

  @@index([ma_cho], map: "fk_gianhang_cho")
  @@index([ma_nguoi_dung], map: "fk_gianhang_nguoidung")
  @@index([ma_quan_ly], map: "fk_gianhang_quanlycho")
}

model gom_don {
  ma_gom_don   String    @id @db.VarChar(10)
  ma_shipper   String    @db.VarChar(8)
  ma_don_hang  String    @db.VarChar(10)
  ma_khung_gio String    @db.VarChar(4)
  ma_khu_vuc   String    @db.VarChar(4)
  don_hang     don_hang  @relation(fields: [ma_don_hang], references: [ma_don_hang], map: "fk_gomdon_donhang")
  khu_vuc      khu_vuc   @relation(fields: [ma_khu_vuc], references: [ma_khu_vuc], map: "fk_gomdon_khu_vuc")
  khung_gio    khung_gio @relation(fields: [ma_khung_gio], references: [ma_khung_gio], map: "fk_gomdon_khunggio")
  shipper      shipper   @relation(fields: [ma_shipper], references: [ma_shipper], map: "fk_gomdon_shipper")

  @@index([ma_don_hang], map: "fk_gomdon_donhang")
  @@index([ma_khu_vuc], map: "fk_gomdon_khu_vuc")
  @@index([ma_khung_gio], map: "fk_gomdon_khunggio")
  @@index([ma_shipper], map: "fk_gomdon_shipper")
}

model khu_vuc {
  ma_khu_vuc String    @id @db.VarChar(4)
  phuong     String    @db.VarChar(255)
  longitude  Float?    @db.Float
  latitude   Float?    @db.Float
  gom_don    gom_don[]
}

model khung_gio {
  ma_khung_gio String    @id @db.VarChar(4)
  gio_bat_dau  DateTime  @db.Time(0)
  gio_ket_thuc DateTime  @db.Time(0)
  gom_don      gom_don[]
}

model mon_an {
  ma_mon_an            String             @id @db.VarChar(5)
  ten_mon_an           String             @db.VarChar(255)
  hinh_anh             String?            @db.Text
  khoang_thoi_gian     Int?
  do_kho               String?            @db.VarChar(255)
  khau_phan_tieu_chuan Int
  cach_thuc_hien       String             @db.Text
  so_che               String?            @db.Text
  cach_dung            String?            @db.Text
  calories             Float?             @db.Float
  cong_thuc_mon_an     cong_thuc_mon_an[]
  phan_loai_mon_an     phan_loai_mon_an[]
}

model nguoi_dung {
  ma_nguoi_dung  String        @id @db.VarChar(6)
  ten_dang_nhap  String        @db.VarChar(255)
  ten_nguoi_dung String        @db.VarChar(255)
  mat_khau       String        @db.VarChar(255)
  vai_tro        String        @db.VarChar(255)
  gioi_tinh      String        @db.Char(1)
  so_tai_khoan   String        @db.VarChar(255)
  sdt            String        @db.Char(10)
  ngan_hang      String        @db.VarChar(255)
  dia_chi        String        @db.VarChar(255)
  gian_hang      gian_hang[]
  nguoi_mua      nguoi_mua[]
  quan_ly_cho    quan_ly_cho[]
  shipper        shipper[]
}

model nguoi_mua {
  ma_nguoi_mua  String     @id @db.VarChar(8)
  ma_nguoi_dung String     @db.VarChar(6)
  can_nang      Float?     @db.Float
  chieu_cao     Float?     @db.Float
  danh_gia      danh_gia[]
  don_hang      don_hang[]
  nguoi_dung    nguoi_dung @relation(fields: [ma_nguoi_dung], references: [ma_nguoi_dung], map: "fk_nguoimua_nguoidung")

  @@index([ma_nguoi_dung], map: "fk_nguoimua_nguoidung")
}

model nguyen_lieu {
  ma_nguyen_lieu      String             @id @db.VarChar(10)
  ten_nguyen_lieu     String             @db.VarChar(255)
  ma_nhom_nguyen_lieu String             @db.VarChar(3)
  don_vi              String?            @db.VarChar(255)
  cong_thuc_mon_an    cong_thuc_mon_an[]
  nhom_nguyen_lieu    nhom_nguyen_lieu   @relation(fields: [ma_nhom_nguyen_lieu], references: [ma_nhom_nguyen_lieu], map: "fk_nguyenlieu_nhomnguyenlieu")
  san_pham_ban        san_pham_ban[]

  @@index([ma_nhom_nguyen_lieu], map: "fk_nguyenlieu_nhomnguyenlieu")
}

model nhom_nguyen_lieu {
  ma_nhom_nguyen_lieu   String        @id @db.VarChar(3)
  ten_nhom_nguyen_lieu  String        @db.VarChar(255)
  loai_nhom_nguyen_lieu String        @db.VarChar(255)
  nguyen_lieu           nguyen_lieu[]
}

model phan_loai_mon_an {
  ma_danh_muc_mon_an String          @db.VarChar(4)
  ma_mon_an          String          @db.VarChar(5)
  danh_muc_mon_an    danh_muc_mon_an @relation(fields: [ma_danh_muc_mon_an], references: [ma_danh_muc_mon_an], map: "fk_phanloai_danhmuc")
  mon_an             mon_an          @relation(fields: [ma_mon_an], references: [ma_mon_an], map: "fk_phanloai_monan")

  @@id([ma_danh_muc_mon_an, ma_mon_an])
  @@index([ma_mon_an], map: "fk_phanloai_monan")
}

model quan_ly_cho {
  ma_quan_ly    String      @id @db.VarChar(8)
  ma_cho        String      @db.VarChar(5)
  ma_nguoi_dung String      @db.VarChar(6)
  gian_hang     gian_hang[]
  cho_table     cho_table   @relation(fields: [ma_cho], references: [ma_cho], map: "fk_quanlycho_cho")
  nguoi_dung    nguoi_dung  @relation(fields: [ma_nguoi_dung], references: [ma_nguoi_dung], map: "fk_quanlycho_nguoidung")

  @@index([ma_cho], map: "fk_quanlycho_cho")
  @@index([ma_nguoi_dung], map: "fk_quanlycho_nguoidung")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model rawdata_test {
  Link_m_n__n         String? @map("Link món ăn") @db.VarChar(2000)
  Danh_m_c_m_n__n     String? @map("Danh mục món ăn") @db.Text
  T_n_m_n__n          String? @map("Tên món ăn") @db.VarChar(255)
  Kh_u_ph_n           String? @map("Khẩu phần") @db.VarChar(10)
  Th_i_gian_th_c_hi_n String? @map("Thời gian thực hiện") @db.VarChar(10)
  Nguy_n_li_u         String? @map("Nguyên liệu") @db.Text
  C_ch_th_c_hi_n      String? @map("Cách thực hiện") @db.Text
  Calories            String? @db.Text
  kh_                 String? @map("Độ khó") @db.VarChar(20)
  H_nh__nh            String? @map("Hình ảnh") @db.VarChar(2000)
  Trang               Int?
  S__ch_              String? @map("Sơ chế") @db.Text
  C_ch_d_ng           String? @map("Cách dùng") @db.Text

  @@ignore
}

model san_pham_ban {
  ma_nguyen_lieu          String      @db.VarChar(10)
  ma_gian_hang            String      @db.VarChar(8)
  hinh_anh                String      @db.Text
  so_luong_ban            Float       @db.Float
  gia_goc                 Int
  phan_tram_giam_gia      Float?      @db.Float
  ngay_cap_nhat           DateTime    @db.DateTime(0)
  thoi_gian_bat_dau_giam  DateTime?   @db.DateTime(0)
  thoi_gian_ket_thuc_giam DateTime?   @db.DateTime(0)
  gia_cuoi                Int
  gian_hang               gian_hang   @relation(fields: [ma_gian_hang], references: [ma_gian_hang], map: "fk_sanphamban_gianhang")
  nguyen_lieu             nguyen_lieu @relation(fields: [ma_nguyen_lieu], references: [ma_nguyen_lieu], map: "fk_sanphamban_nguyenlieu")

  @@id([ma_nguyen_lieu, ma_gian_hang])
  @@index([ma_gian_hang], map: "fk_sanphamban_gianhang")
}

model shipper {
  ma_shipper    String     @id @db.VarChar(8)
  ma_nguoi_dung String     @db.VarChar(6)
  phuong_tien   String     @db.VarChar(255)
  bien_so_xe    String     @db.VarChar(255)
  gom_don       gom_don[]
  nguoi_dung    nguoi_dung @relation(fields: [ma_nguoi_dung], references: [ma_nguoi_dung], map: "fk_shipper_nguoidung")

  @@index([ma_nguoi_dung], map: "fk_shipper_nguoidung")
}

model thanh_toan {
  ma_thanh_toan         String     @id @db.VarChar(10)
  hinh_thuc_thanh_toan  String     @db.VarChar(255)
  so_tien_thanh_toan    Int
  tai_khoan_thanh_toan  String     @db.VarChar(255)
  thoi_gian_thanh_toan  DateTime   @db.DateTime(0)
  tinh_trang_thanh_toan String     @db.VarChar(255)
  don_hang              don_hang[]
}
